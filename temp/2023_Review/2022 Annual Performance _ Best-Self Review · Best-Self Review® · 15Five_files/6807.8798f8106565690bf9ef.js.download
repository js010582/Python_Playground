"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[6807],{95773:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(96558),o=n.n(r),i=n(10361),c=n.n(i)()(o());c.push([e.id,'.ReactionsStyles-module__emojiButton___bFwhy {\n  color: #a49fb2;\n}\n\n.ReactionsStyles-module__emojiButton___bFwhy:hover {\n  color: #5e5777;\n}\n\n.ReactionsStyles-module__reactionCountEmoji___G30Pl {\n  display: inline-block;\n  font-family: "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n  margin-right: 1px;\n}\n\n@media not screen and (min-resolution: 2), not screen and (-webkit-min-device-pixel-ratio: 2), not screen and (min-resolution: 192dpi) {\n  .ReactionsStyles-module__reactionCountEmoji___G30Pl {\n    margin-right: 6px;\n  }\n}\n\n.ReactionsStyles-module__reactionCountIndicator___u2tvu {\n  color: #156085;\n  font-size: 0.625rem;\n}\n\n.ReactionsStyles-module__reactionCounter___ku3jZ {\n  background-color: #f8f8f9;\n  border-color: #d1cfd9;\n}\n\n.ReactionsStyles-module__reactionCounter___ku3jZ:hover {\n  border-color: #6c00db;\n}\n\n.ReactionsStyles-module__reactionCounter___ku3jZ:active {\n  background-color: #e7e7eb;\n}\n\n.ReactionsStyles-module__reactionCounter_active___bDPNo {\n  background-color: #f0e9fb;\n  border-color: #4c0099;\n}\n\n.ReactionsStyles-module__emojiButtonPopper___BEoJz {\n  margin-left: -8px;\n}\n',""]),c.locals={emojiButton:"ReactionsStyles-module__emojiButton___bFwhy flex text-18",reactionCountEmoji:"ReactionsStyles-module__reactionCountEmoji___G30Pl",reactionCountIndicator:"ReactionsStyles-module__reactionCountIndicator___u2tvu",reactionCounter:"ReactionsStyles-module__reactionCounter___ku3jZ inline-flex items-center btn px-1 py-0 mr-1",reactionCounter_active:"ReactionsStyles-module__reactionCounter_active___bDPNo",emojiButtonPopper:"ReactionsStyles-module__emojiButtonPopper___BEoJz popper-emoji-menu z-1"};const a=c},50413:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(90487),o=n.n(r),i=n(80631),c=n.n(i),a=n(52052),u=n.n(a),l=n(64010),s=n.n(l),m=n(11469),f=n.n(m),_=n(9329),b=n.n(_),d=n(95773),p={};p.styleTagTransform=b(),p.setAttributes=s(),p.insert=u().bind(null,"head"),p.domAPI=c(),p.insertStyleElement=f(),o()(d.Z,p);const y=d.Z&&d.Z.locals?d.Z.locals:void 0},76807:(e,t,n)=>{var r=n(74512),o=n(12788),i=n(70444),c=n(1635),a=n(32735),u=n(95163),l=n(99212),s=n.n(l),m=n(65311),f=n.n(m),_=n(73347),b=n.n(_);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){if("error"===e.result)throw e;return e}var y={answer:"answers",answer_comment:"answer_comments",goal_status:"goalstatuses",goal_status_comment:"goalstatus_comments",high_five:"highfives",high_five_comment:"highfive_comments",objective_feed_entry:"objectives",objective_feed_entry_comment:"objective_comments",report_comment:"report_comments"},j={answer:"answer_id",answer_comment:"comment_id",goal_status:"goal_status_id",goal_status_comment:"comment_id",high_five:"high_five_id",high_five_comment:"comment_id",objective_feed_entry:"feed_entry_id",objective_feed_entry_comment:"comment_id",report_comment:"comment_id"},v={answer:b().ff_answer_like(),answer_comment:b().ff_answer_comment_like(),goal_status:b().ff_goal_status_like(),goal_status_comment:b().ff_goal_status_comment_like(),high_five:b()["high_fives:like"](),high_five_comment:b()["high_fives:like_comment"](),objective_feed_entry:b()["objectives:like_feed_entry"](),objective_feed_entry_comment:b()["objectives:like_comment"](),report_comment:b().ff_report_comment_like()},h={answer:b().ff_answer_unlike(),answer_comment:b().ff_answer_comment_unlike(),goal_status:b().ff_goal_status_unlike(),goal_status_comment:b().ff_goal_status_comment_unlike(),high_five:b()["high_fives:unlike"](),high_five_comment:b()["high_fives:unlike_comment"](),objective_feed_entry:b()["objectives:unlike_feed_entry"](),objective_feed_entry_comment:b()["objectives:unlike_comment"](),report_comment:b().ff_report_comment_unlike()};const g={submitReaction:function(e){var t,n=e.objectType,r=e.objectId,o=e.emoji,i=(d(t={},j[n],r),d(t,"emoji",o),t);return n.includes("comment")&&(i.comment_type=n.replace("_comment","")),f().post({url:v[n],data:i}).then(p)},removeReaction:function(e){var t,n=e.objectType,r=e.objectId,o=e.emoji,i=(d(t={},j[n],r),d(t,"emoji",o),t);return n.includes("comment")&&(i.comment_type=n.replace("_comment","")),f().post({url:h[n],data:i}).then(p)}};var C=n(40841),w=n.n(C),O=n(56632),S=n(74161),k=n(50413);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e){var t,n,o,i=e.emoji,c=e.emojiUsers,u=e.userId,l=e.allEmojis,s=e.onAddEmoji,m=e.onRemoveEmoji,_=(0,a.useRef)(null),b=c.some((function(e){return e.id===u})),d=(0,a.useMemo)((function(){return(b?[{name:"You",id:u}].concat((e=c.filter((function(e){return e.id!==u})),function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())):c).slice(0,5);var e}),[c,c.length]);return(0,a.useEffect)((function(){(0,O.Z)(_.current)}),[d]),(0,r.jsxs)("button",{ref:_,type:"button",className:w()(k.Z.reactionCounter,(t={},n=k.Z.reactionCounter_active,o=b,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t)),"data-toggle":"tooltip","data-placement":"top","data-html":"true","data-original-title":(0,S.renderToStaticMarkup)((0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"font-bold",children:d.map((function(e,t,n){var r=e.name,o=n.length-1;if(t<o)2===n.length?r+=" and ":t===o-1&&n.length===c.length?r+=", and ":r+=", ";else if(c.length>n.length){var i=c.length-n.length;r+=", and ".concat(i,1===i?" other":" others")}return r}))})," ","reacted with :",l[i],":"]})),"data-trigger":"hover",onClick:function(){var e;b?(e=f()(_.current),1===c.length&&e.data("bs.tooltip")&&e.tooltip("dispose"),m(i)):s(i)},children:[(0,r.jsx)("span",{className:k.Z.reactionCountEmoji,children:i}),(0,r.jsx)("span",{className:k.Z.reactionCountIndicator,children:c.length})]})}var x=n(66063);const A=(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",pointerEvents:"none",children:(0,r.jsx)("path",{d:"M16 8C16 6.8278 15.7667 5.72916 15.3003 4.7042C14.9069 4.89369 14.4659 4.99988 14 4.99988C13.9811 4.99988 13.9623 4.9997 13.9434 4.99936C14.011 5.13337 14.0751 5.27073 14.1356 5.41145C14.4898 6.23433 14.667 7.09709 14.667 8C14.6671 8.90278 14.4898 9.7658 14.1356 10.5885C13.7813 11.4114 13.3075 12.1199 12.7137 12.7135C12.1201 13.3073 11.4117 13.7812 10.5888 14.1352C9.7658 14.4895 8.90304 14.6666 8.00026 14.6666C7.09747 14.6666 6.23471 14.4894 5.41171 14.1352C4.58884 13.7811 3.88039 13.3071 3.28663 12.7135C2.69301 12.1197 2.21905 11.4115 1.86476 10.5885C1.5106 9.76567 1.33353 8.90265 1.33353 8C1.33353 7.09722 1.5106 6.23445 1.86476 5.41145C2.21892 4.58858 2.69288 3.88026 3.28663 3.28638C3.88039 2.69275 4.58884 2.21879 5.41171 1.86451C6.23458 1.51048 7.09747 1.3334 8.00026 1.3334C8.90291 1.3334 9.76593 1.51035 10.5888 1.86451C10.7294 1.92501 10.8666 1.98902 11.0005 2.05652C11.0002 2.03768 11 2.0188 11 1.99988C11 1.53407 11.1062 1.09305 11.2956 0.699706C10.2706 0.233215 9.17234 0 8.00026 0C6.54885 0 5.21021 0.35761 3.98459 1.07296C2.75885 1.78818 1.78843 2.75859 1.07308 3.98434C0.35761 5.21008 0 6.54872 0 8C0 9.45141 0.357738 10.7898 1.07296 12.0157C1.7883 13.2411 2.75872 14.2117 3.98447 14.927C5.21021 15.6423 6.54872 15.9999 8.00013 15.9999C9.45154 15.9999 10.7902 15.6423 12.0158 14.927C13.2414 14.2117 14.2118 13.2411 14.9272 12.0157C15.6424 10.7898 16 9.45128 16 8ZM10.8752 9.07292C11.0419 8.98969 11.2121 8.97537 11.3856 9.03124C11.559 9.08686 11.6875 9.19604 11.7711 9.35906C11.8546 9.5222 11.8685 9.69097 11.8127 9.86434C11.5557 10.7049 11.0765 11.3816 10.3754 11.8957C9.67415 12.4095 8.88222 12.6664 8.00041 12.6664C7.11846 12.6664 6.32679 12.4097 5.62538 11.8957C4.92396 11.3817 4.44476 10.7047 4.1879 9.86434C4.13229 9.69097 4.14622 9.5222 4.22958 9.35906C4.31295 9.19604 4.44489 9.08673 4.62542 9.03124C4.79905 8.97537 4.96743 8.98969 5.13058 9.07292C5.29372 9.15615 5.40316 9.28823 5.45865 9.46876C5.63228 10.0244 5.95345 10.474 6.42217 10.8178C6.89101 11.1613 7.417 11.3334 8.00028 11.3334C8.58368 11.3334 9.1098 11.1614 9.57839 10.8178C10.0472 10.4741 10.3687 10.0244 10.542 9.46876C10.5973 9.28823 10.7084 9.15602 10.8752 9.07292ZM10.6668 4C10.2987 4 9.98429 4.13028 9.72385 4.39072C9.46367 4.65116 9.33313 4.9653 9.33313 5.3334C9.33313 5.70149 9.46367 6.01576 9.72385 6.27607C9.98429 6.53651 10.2987 6.66679 10.6668 6.66679C11.0346 6.66679 11.349 6.53638 11.6095 6.27607C11.8699 6.01576 12.0002 5.70149 12.0002 5.3334C12.0002 4.9653 11.8699 4.65116 11.6095 4.39072C11.349 4.13028 11.0346 4 10.6668 4ZM6.27613 6.27607C6.01569 6.53638 5.70142 6.66679 5.33346 6.66679C4.96536 6.66679 4.65123 6.53651 4.39066 6.27607C4.13022 6.01576 4.00006 5.70149 4.00006 5.3334C4.00006 4.9653 4.13034 4.65116 4.39066 4.39072C4.6511 4.13028 4.96536 4 5.33346 4C5.70142 4 6.01569 4.13028 6.27613 4.39072C6.53657 4.65116 6.66686 4.9653 6.66686 5.3334C6.66686 5.70149 6.53657 6.01576 6.27613 6.27607ZM16 2.34107V1.65893C16 1.54018 15.9045 1.44464 15.7857 1.44464H14.5554V0.214286C14.5554 0.0955355 14.4598 0 14.3411 0H13.6589C13.5402 0 13.4446 0.0955355 13.4446 0.214286V1.44464H12.2143C12.0955 1.44464 12 1.54018 12 1.65893V2.34107C12 2.45982 12.0955 2.55536 12.2143 2.55536H13.4446V3.78571C13.4446 3.90446 13.5402 4 13.6589 4H14.3411C14.4598 4 14.5554 3.90446 14.5554 3.78571V2.55536H15.7857C15.9045 2.55536 16 2.45982 16 2.34107Z"})});var I=n(83568);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Z(e,t,n[t])}))}return e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){a=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=new Map([["+1","👍"],["heart","❤️"],["smile","😄"],["white_check_mark","✅"],["100","💯"],["raised_hands","🙌"]]);function N(e){var t,n,o=e.onEmojiSelect,i=T((0,a.useState)(!1),2),c=i[0],u=i[1],l=T((0,a.useState)(null),2),s=l[0],m=l[1],f=T((0,a.useState)(null),2),_=f[0],b=f[1],d=T((0,a.useState)(null),2),p=d[0],y=d[1],j=(0,I.D)(s,_,{modifiers:[{name:"arrow",options:{element:p,padding:8}}],placement:"bottom-start"}),v=j.styles,h=j.attributes;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{ref:m,type:"button",className:k.Z.emojiButton,"aria-label":"Add emoji reaction",onClick:function(){return u(!0)},children:A}),c&&(0,r.jsxs)("div",(t=M({ref:b,className:k.Z.emojiButtonPopper,style:v.popper},h.popper),n={children:[(0,r.jsx)(x.Z,{onEmojiSelect:function(e){return u(!1),o(e)},onOutsideClick:function(){return u(!1)},customCategories:[{title:"Quick reactions",emojis:{"Quick reactions":D}}]}),(0,r.jsx)("div",{className:"emoji-menu__arrow",ref:y,style:v.arrow})]},n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t))]})}const B=(0,a.createContext)({emojiReactions:{},setEmojiReactions:function(){}});function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t,n,r,o,i,c){try{var a=e[i](c),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function V(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){H(i,r,o,c,a,"next",e)}function a(e){H(i,r,o,c,a,"throw",e)}c(void 0)}))}}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){F(e,t,n[t])}))}return e}function G(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){a=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Q="❤️",L=window.EMOJIS||{},Y=Object.fromEntries(Object.values(L).flatMap((function(e){return Object.entries(e).map((function(e){var t=$(e,2),n=t[0];return[t[1],n]}))})));function q(e){var t,n=e.objectId,o=e.objectType,i=e.userId,c=function(e){d(G(z({},b),F({},y[o],z({},p,e))))},l=$((0,a.useState)({}),2),m=l[0],f=l[1],_=(0,a.useContext)(B),b=_.emojiReactions,d=_.setEmojiReactions,p=b[y[o]],j=(0,a.useMemo)((function(){var e=(null==p?void 0:p[n])||{};return Object.fromEntries(Object.entries(e).map((function(e){var t,n=$(e,2),r=n[0],o=n[1];return[(t=r,t.replace(/\\u(\w\w\w\w)/g,(function(e,t){var n=parseInt(t,16);return String.fromCharCode(n)}))),o]})))}),[p]),v=(0,a.useMemo)((function(){return Object.entries(j).map((function(e){var t=$(e,2),n=t[0];return G(z({},t[1]),{emoji:n})})).sort((function(e,t){return s()(e.first_reaction_ts).diff(t.first_reaction_ts)}))}),[j]),h=(t=V((function(e){var t,r,i;return J(this,(function(a){switch(a.label){case 0:if(m[e])return[2];f(G(z({},m),F({},e,!0))),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,g.removeReaction({objectId:n,emoji:e,objectType:o})];case 2:return t=a.sent(),r=t.emoji_reactions,0===Object.keys(r).length?c(F({},n,void 0)):c(r),[3,5];case 3:return i=a.sent(),u.Z.error(i.err_msg||"Sorry, we were unable to remove your reaction."),[3,5];case 4:return f(G(z({},m),F({},e,!1))),[7];case 5:return[2]}}))})),function(e){return t.apply(this,arguments)}),C=function(){var e=V((function(e){var t,r,a,l;return J(this,(function(s){switch(s.label){case 0:if(m[e])return[2];if(f(G(z({},m),F({},e,!0))),null===(t=j[e])||void 0===t?void 0:t.reactors_list.some((function(e){return e.id===i})))return h(e),[2];s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,g.submitReaction({objectId:n,emoji:e,objectType:o})];case 2:return r=s.sent(),a=r.emoji_reactions,c(a),[3,5];case 3:return l=s.sent(),u.Z.error(l.err_msg||"Sorry, we were unable to submit your reaction."),[3,5];case 4:return f(G(z({},m),F({},e,!1))),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{className:"row u-gutters-4 u-gutters-y-4 items-center",children:[v.map((function(e){return e.reactors_list.length>0&&(0,r.jsx)("div",{className:"col-auto",children:(0,r.jsx)(E,{emoji:e.emoji,emojiUsers:e.reactors_list,userId:i,allEmojis:Y,onAddEmoji:C,onRemoveEmoji:h})},"".concat(o,"-").concat(n,"-").concat(e.emoji))})),(0,r.jsx)("div",{className:"col-auto",children:(0,r.jsx)(N,{onEmojiSelect:C})}),(0,r.jsx)("button",{type:"button",onClick:function(){v.some((function(e){return e.emoji===Q}))||C(Q)},className:"sr-only",id:"like_".concat(o,"_control_").concat(n),"aria-hidden":"true","aria-label":"Like from email",tabIndex:-1})]})}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){W(e,t,n[t])}))}return e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(e){a=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(){var e=ee((0,a.useState)(new Set),2),t=e[0],n=e[1],u=ee((0,a.useState)(c.rg.emoji_reactions||{}),2),l=u[0],s=u[1];(0,a.useEffect)((function(){var e=(0,i.observe)(".js-reaction-container",{add:function(e){n((function(t){return t.has(e)?t:new Set(t.add(e))}))},remove:function(e){n((function(t){return t.has(e)&&t.delete(e),new Set(t)}))}});return function(){e.abort()}}),[]),(0,a.useEffect)((function(){var e=(0,i.observe)(".js-emoji-reaction-data",(function(e){var t,n=null===(t=e.getElementsByTagName("script"))||void 0===t?void 0:t[0].id,r=(0,c.ln)("#".concat(n)).emoji_reactions,o=void 0===r?{}:r;s((function(e){return Object.keys(o).reduce((function(e,t){return n=X({},e),r=null!=(r=W({},t,X({},e[t],o[t])))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})),n;var n,r}),e)}))}));return function(){e.abort()}}),[]);var m=(0,a.useMemo)((function(){return{emojiReactions:l,setEmojiReactions:s}}),[l]);return(0,r.jsx)(B.Provider,{value:m,children:Array.from(t,(function(e){if(!e)return null;var t=e.getAttribute("data-object-id")||"",n=parseInt(e.getAttribute("data-object-user-id")||"",10),i=e.getAttribute("data-object-type")||"",c=parseInt(e.getAttribute("data-user-id")||"",10);return(0,o.createPortal)((0,r.jsx)(q,{objectId:t,objectUserId:n,userId:c,objectType:i}),e)}))})}var ne=!1;(0,i.observe)(".js-reaction-container",(function(e){ne||((0,o.render)((0,r.jsx)(te,{}),e),ne=!0)}))}}]);